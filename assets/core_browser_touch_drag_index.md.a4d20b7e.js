import{d as y,r as M,i as L,j as E,o as b,c as v,a as n,n as F,f as i,t as u,F as P,e as m,w as f,g as x}from"./app.7faf9ebb.js";class X{getPoint(t,e){return{x:Math.round(t.touches[e].pageX),y:Math.round(t.touches[e].pageY)}}getVector(t,e){return{x:Math.round(t.x-e.x),y:Math.round(t.y-e.y)}}getLength(t){return Math.sqrt(t.x*t.x+t.y*t.y)}getAngle(t,e){const o=t.x*e.y-e.x*t.y>0?1:-1,a=this.getLength(t),r=this.getLength(e),s=a*r;if(s===0)return 0;let c=(t.x*e.x+t.y*e.y)/s;return c>1&&(c=1),c<-1&&(c=-1),Math.acos(c)*o*180/Math.PI}matrixTo(t){const e=t.replace("matrix(","").replace(")","").split(","),o=+e[0],r=+e[1]/o,s=Math.atan(r)*180/Math.PI,h=o/Math.cos(Math.PI/180*s);return{x:parseInt(e[4]),y:parseInt(e[5]),scale:h,rotate:s}}}const p=new X;function Y(d){const{el:t,onDragStart:e,onDragMove:o,onDragEnd:a}=d;let r,s,h;function c(l){r=p.getPoint(l,0),e==null||e(l)}function g(l){s=p.getPoint(l,0),o==null||o({delta:{deltaX:s.x-r.x,deltaY:s.y-r.y},origin:l})}function _(l){a==null||a(l,h)}return t.addEventListener("touchstart",c),t.addEventListener("touchmove",g),t.addEventListener("touchend",_),t.addEventListener("touchcancel",_),function(){t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",g),t.removeEventListener("touchend",_),t.removeEventListener("touchcancel",_)}}const k=n("div",{class:"mb4"},"\u8BF7\u5728\u624B\u673A\u6A21\u5F0F\u4E0B\u4F7F\u7528",-1),C={class:"border h80"},w={class:"mt4"},D=n("br",null,null,-1),$=n("br",null,null,-1),B=y({__name:"demo",setup(d){const t=M(),e=L({x:0,y:0,lastX:0,lastY:0});function o(r){r.origin.preventDefault(),e.x=r.delta.deltaX,e.y=r.delta.deltaY}function a(){e.lastX+=e.x,e.lastY+=e.y,e.x=0,e.y=0}return E(()=>{Y({el:t.value,onDragMove:o,onDragEnd:a})}),(r,s)=>(b(),v(P,null,[k,n("div",C,[n("div",{ref_key:"dragRef",ref:t,class:"w20 h20 border",style:F({transform:`matrix(1, 0, 0, 1, ${e.lastX+e.x}, ${e.lastY+e.y})`})},null,4)]),n("div",w,[i(" x: "+u(e.x)+" y: "+u(e.y)+" ",1),D,i(" lastX: "+u(e.lastX)+" lastY: "+u(e.lastY)+" ",1),$,i(" moveX: "+u(e.lastX+e.x)+" moveY: "+u(e.lastY+e.y),1)])],64))}}),S=n("h1",{id:"drag",tabindex:"-1"},[i("drag "),n("a",{class:"header-anchor",href:"#drag","aria-hidden":"true"},"#")],-1),T=n("p",null,"\u62D6\u52A8\u4E8B\u4EF6",-1),I=n("h2",{id:"demo",tabindex:"-1"},[i("Demo "),n("a",{class:"header-anchor",href:"#demo","aria-hidden":"true"},"#")],-1),A=n("h2",{id:"source",tabindex:"-1"},[i("Source "),n("a",{class:"header-anchor",href:"#source","aria-hidden":"true"},"#")],-1),N=n("p",null,[n("a",{href:"https://github.com/FastUse/utils/tree/main/packages/core/browser/touch/drag/index.ts",target:"_blank",rel:"noreferrer"},"Source"),i(" \u2022 "),n("a",{href:"https://github.com/FastUse/utils/tree/main/packages/core/browser/touch/drag/demo.vue",target:"_blank",rel:"noreferrer"},"Demo")],-1),R=JSON.parse('{"title":"drag","description":"","frontmatter":{},"headers":[{"level":2,"title":"Demo","slug":"demo","link":"#demo","children":[]},{"level":2,"title":"Source","slug":"source","link":"#source","children":[]}],"relativePath":"core/browser/touch/drag/index.md"}'),V={name:"core/browser/touch/drag/index.md"},U=y({...V,setup(d){return(t,e)=>{const o=x("DemoContainer"),a=x("ClientOnly");return b(),v("div",null,[S,T,I,m(a,null,{default:f(()=>[m(o,null,{default:f(()=>[m(B)]),_:1})]),_:1}),A,N])}}});export{R as __pageData,U as default};
